---
title: "Chapter 4: URDF Robot Modeling"
description: "Learn to define robot structure using URDF with links, joints, visual geometry, and kinematic chains for simulation and control"
keywords: ["URDF", "robot modeling", "links", "joints", "RViz2", "xacro", "kinematic chains", "humanoid robots"]
sidebar_position: 4
learning_objectives:
  - "Create URDF files defining robot links, joints, and kinematic chains"
  - "Apply visual and collision geometry for robot visualization and physics"
  - "Design humanoid robot models with proper joint hierarchies and naming conventions"
  - "Evaluate URDF models using check_urdf and visualize in RViz2"
prerequisites: ["Chapter 3: Services, Actions, and Parameters", "Basic XML syntax", "3D coordinate systems"]
estimated_time: 100
content_type: "tutorial"
difficulty: "intermediate"
ros2_distribution: "humble"
chapter_number: 4
---

# Chapter 4: URDF Robot Modeling

Before you can simulate or control a robot, you need to **describe** it—its shape, mass, joints, sensors. In ROS 2, this is done with **URDF (Unified Robot Description Format)**, an XML-based language for defining robot structure.

Think of URDF as the "blueprint" for your robot. Just as an architect uses CAD drawings to specify building dimensions, you'll use URDF to specify:
- **Links** (rigid body parts: torso, arms, legs)
- **Joints** (connections between links: shoulder, elbow, knee)
- **Visual geometry** (how the robot looks in RViz2)
- **Collision geometry** (simplified shapes for physics simulation)
- **Inertial properties** (mass, center of mass, inertia tensors)

By the end of this chapter, you'll build a URDF model of a simplified humanoid robot and visualize it in RViz2.

## 4.1 What is URDF?

<ConceptCallout type="definition" title="URDF: Unified Robot Description Format">

**URDF** is an XML-based specification for robot models:
- **Links**: Rigid bodies (base, limbs, sensors)
- **Joints**: Connections between links (revolute, prismatic, fixed)
- **Visual**: 3D meshes or primitive shapes for rendering
- **Collision**: Simplified geometry for collision detection
- **Inertial**: Mass distribution for physics simulation

URDF files are used by:
- **RViz2**: 3D visualization tool
- **Gazebo**: Physics-based simulation
- **MoveIt2**: Motion planning framework
- **robot_state_publisher**: Publishes TF transforms based on joint states

</ConceptCallout>

### 4.1.1 URDF File Structure

Every URDF file starts with the `<robot>` root element:

<CodeExample language="xml" filename="simple_robot.urdf" difficulty="beginner">
{`<?xml version="1.0"?>
<robot name="simple_robot">
  <!-- Links define rigid body parts -->
  <link name="base_link">
    <!-- Visual, collision, inertial properties here -->
  </link>

  <link name="arm_link">
    <!-- ... -->
  </link>

  <!-- Joints connect links -->
  <joint name="base_to_arm" type="revolute">
    <parent link="base_link"/>
    <child link="arm_link"/>
    <!-- Joint properties here -->
  </joint>
</robot>
`}
</CodeExample>

**Key Rules**:
- Every robot has a **root link** (typically `base_link`)
- Links are connected by **joints** forming a **tree structure** (no loops)
- Joint names must be unique
- Each joint has exactly one parent and one child link

## 4.2 Links: Rigid Body Parts

A **link** represents a rigid body part of the robot. Each link can have:
- **Visual**: How it looks (rendered in RViz2)
- **Collision**: Simplified shape for collision detection
- **Inertial**: Mass and inertia tensor for physics

### 4.2.1 Visual Geometry

Visual geometry defines how the link appears in visualization tools:

<CodeExample language="xml" filename="link_with_visual.urdf" difficulty="beginner">
{`<link name="torso">
  <visual>
    <origin xyz="0 0 0.25" rpy="0 0 0"/>
    <geometry>
      <box size="0.3 0.2 0.5"/>
    </geometry>
    <material name="blue">
      <color rgba="0.0 0.0 0.8 1.0"/>
    </material>
  </visual>
</link>
`}
</CodeExample>

**Visual Elements**:
- **`<origin>`**: Position (xyz in meters) and orientation (rpy in radians, roll-pitch-yaw)
- **`<geometry>`**: Shape definition
  - `<box size="x y z"/>`: Rectangular box
  - `<cylinder radius="r" length="l"/>`: Cylinder
  - `<sphere radius="r"/>`: Sphere
  - `<mesh filename="package://my_robot/meshes/torso.stl"/>`: 3D mesh file
- **`<material>`**: Color (rgba: red, green, blue, alpha 0-1)

<ConceptCallout type="tip" title="Coordinate Frames">

Each link has its own **coordinate frame**:
- **Origin** is at the link's reference point (often center of mass or joint attachment)
- **X-axis**: Forward (red in RViz2)
- **Y-axis**: Left (green in RViz2)
- **Z-axis**: Up (blue in RViz2)

Follow the **right-hand rule**: curl fingers from X to Y, thumb points to Z.

</ConceptCallout>

### 4.2.2 Collision Geometry

Collision geometry is used for physics simulation and path planning. Use **simpler shapes** than visual geometry for performance:

<CodeExample language="xml" filename="link_with_collision.urdf" difficulty="beginner">
{`<link name="forearm">
  <!-- Visual: detailed mesh -->
  <visual>
    <geometry>
      <mesh filename="package://my_robot/meshes/forearm_detailed.stl"/>
    </geometry>
  </visual>

  <!-- Collision: simple cylinder (faster collision detection) -->
  <collision>
    <origin xyz="0 0 0.15" rpy="0 0 0"/>
    <geometry>
      <cylinder radius="0.04" length="0.3"/>
    </geometry>
  </collision>
</link>
`}
</CodeExample>

**Best Practice**: Visual geometry can be detailed meshes, but collision geometry should use primitive shapes (box, cylinder, sphere) for computational efficiency.

### 4.2.3 Inertial Properties

Inertial properties define mass distribution for physics simulation:

<CodeExample language="xml" filename="link_with_inertial.urdf" difficulty="intermediate">
{`<link name="upper_arm">
  <!-- Visual and collision omitted for brevity -->

  <inertial>
    <origin xyz="0 0 0.1" rpy="0 0 0"/>
    <mass value="2.5"/>  <!-- kg -->
    <inertia
      ixx="0.01" ixy="0.0" ixz="0.0"
      iyy="0.01" iyz="0.0"
      izz="0.005"/>
  </inertial>
</link>
`}
</CodeExample>

**Inertial Elements**:
- **`<mass>`**: Mass in kilograms
- **`<inertia>`**: 3x3 inertia tensor (kg·m²)
  - Diagonal elements (ixx, iyy, izz): moments of inertia
  - Off-diagonal (ixy, ixz, iyz): products of inertia (often 0 for symmetric objects)

<ConceptCallout type="warning" title="Inertia Tensor Requirements">

For stable physics simulation, the inertia tensor must be:
- **Positive definite**: All eigenvalues > 0
- **Physically realistic**: Approximate real-world mass distribution

For simple shapes:
- **Box** (w, h, d): `ixx = m(h²+d²)/12`, `iyy = m(w²+d²)/12`, `izz = m(w²+h²)/12`
- **Cylinder** (r, h): `ixx = iyy = m(3r²+h²)/12`, `izz = mr²/2`
- **Sphere** (r): `ixx = iyy = izz = 2mr²/5`

Tools like MeshLab can compute inertia from 3D meshes.

</ConceptCallout>

## 4.3 Joints: Connecting Links

**Joints** define how links move relative to each other. ROS 2 supports six joint types:

| Joint Type | Description | Example |
|------------|-------------|---------|
| **revolute** | Rotates around axis with limits | Elbow (0° to 150°) |
| **continuous** | Rotates 360° without limits | Wheel axle |
| **prismatic** | Slides along axis with limits | Linear actuator |
| **fixed** | No movement (rigid attachment) | Sensor mount |
| **planar** | Moves in 2D plane | Omni-directional base |
| **floating** | 6-DOF free motion | Free-falling object |

### 4.3.1 Revolute Joint Example

<CodeExample language="xml" filename="revolute_joint.urdf" difficulty="intermediate">
{`<joint name="shoulder_pitch" type="revolute">
  <parent link="torso"/>
  <child link="upper_arm"/>

  <!-- Joint attachment point on parent link -->
  <origin xyz="0.15 0.2 0.4" rpy="0 0 0"/>

  <!-- Rotation axis (1 0 0 = X-axis) -->
  <axis xyz="0 1 0"/>

  <!-- Joint limits -->
  <limit
    lower="-1.57"   <!-- -90 degrees in radians -->
    upper="3.14"    <!-- 180 degrees -->
    effort="50.0"   <!-- Maximum torque (Nm) -->
    velocity="2.0"  <!-- Maximum angular velocity (rad/s) -->
  />

  <!-- Joint dynamics (optional) -->
  <dynamics damping="0.7" friction="0.0"/>
</joint>
`}
</CodeExample>

**Joint Elements**:
- **`<parent>`** and **`<child>`**: Links being connected
- **`<origin>`**: Where child link attaches to parent (xyz position, rpy orientation)
- **`<axis>`**: Rotation axis (unit vector in parent link frame)
- **`<limit>`**: Motion constraints (angles in radians for revolute, meters for prismatic)
- **`<dynamics>`**: Damping and friction for simulation

## 4.4 Example: 2-DOF Robotic Arm

Let's build a simple 2-DOF arm with a base, upper arm, and forearm:

<CodeExample language="xml" filename="two_dof_arm.urdf" difficulty="intermediate" estimatedTime={30}>
{`<?xml version="1.0"?>
<robot name="two_dof_arm">

  <!-- Base Link (fixed to world) -->
  <link name="base_link">
    <visual>
      <geometry>
        <cylinder radius="0.1" length="0.05"/>
      </geometry>
      <material name="gray">
        <color rgba="0.5 0.5 0.5 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <cylinder radius="0.1" length="0.05"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0"
               iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>

  <!-- Upper Arm Link -->
  <link name="upper_arm">
    <visual>
      <origin xyz="0 0 0.15" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.03" length="0.3"/>
      </geometry>
      <material name="blue">
        <color rgba="0.0 0.0 0.8 1.0"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0.15" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.03" length="0.3"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0.15" rpy="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.004" ixy="0.0" ixz="0.0"
               iyy="0.004" iyz="0.0" izz="0.0001"/>
    </inertial>
  </link>

  <!-- Forearm Link -->
  <link name="forearm">
    <visual>
      <origin xyz="0 0 0.125" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.025" length="0.25"/>
      </geometry>
      <material name="green">
        <color rgba="0.0 0.8 0.0 1.0"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0.125" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.025" length="0.25"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0.125" rpy="0 0 0"/>
      <mass value="0.3"/>
      <inertia ixx="0.002" ixy="0.0" ixz="0.0"
               iyy="0.002" iyz="0.0" izz="0.0001"/>
    </inertial>
  </link>

  <!-- Joint 1: Base to Upper Arm (Shoulder) -->
  <joint name="shoulder_joint" type="revolute">
    <parent link="base_link"/>
    <child link="upper_arm"/>
    <origin xyz="0 0 0.025" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>  <!-- Rotate around Y-axis -->
    <limit lower="-1.57" upper="1.57" effort="10.0" velocity="1.0"/>
  </joint>

  <!-- Joint 2: Upper Arm to Forearm (Elbow) -->
  <joint name="elbow_joint" type="revolute">
    <parent link="upper_arm"/>
    <child link="forearm"/>
    <origin xyz="0 0 0.3" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>  <!-- Rotate around Y-axis -->
    <limit lower="0.0" upper="2.8" effort="5.0" velocity="1.0"/>
  </joint>

</robot>
`}
</CodeExample>

**Kinematic Chain**: `base_link` → (shoulder_joint) → `upper_arm` → (elbow_joint) → `forearm`

## 4.5 Humanoid Robot URDF

Humanoid robots require more complex kinematic trees with multiple branches for head, arms, and legs.

### 4.5.1 Humanoid Naming Conventions

<ConceptCallout type="concept" title="Standard Humanoid Link Names">

Follow REP-120 naming conventions for consistency:
- **Base**: `base_link` (pelvis/hip center)
- **Head**: `head_link`
- **Torso**: `torso_link`, `chest_link`
- **Arms**: `left_upper_arm`, `left_forearm`, `left_hand`
- **Legs**: `left_thigh`, `left_shin`, `left_foot`
- **Fingers**: `left_thumb_proximal`, `left_index_distal`

**Prefix convention**: `left_` / `right_` for bilateral symmetry

</ConceptCallout>

### 4.5.2 Simplified Humanoid URDF

<CodeExample language="xml" filename="simple_humanoid.urdf" difficulty="advanced" estimatedTime={60}>
{`<?xml version="1.0"?>
<robot name="simple_humanoid">

  <!-- Base Link (Pelvis) -->
  <link name="base_link">
    <visual>
      <geometry>
        <box size="0.2 0.15 0.1"/>
      </geometry>
      <material name="gray">
        <color rgba="0.5 0.5 0.5 1.0"/>
      </material>
    </visual>
    <inertial>
      <mass value="5.0"/>
      <inertia ixx="0.02" ixy="0.0" ixz="0.0"
               iyy="0.03" iyz="0.0" izz="0.02"/>
    </inertial>
  </link>

  <!-- Torso Link -->
  <link name="torso">
    <visual>
      <origin xyz="0 0 0.25" rpy="0 0 0"/>
      <geometry>
        <box size="0.25 0.2 0.5"/>
      </geometry>
      <material name="blue">
        <color rgba="0.0 0.3 0.8 1.0"/>
      </material>
    </visual>
    <inertial>
      <origin xyz="0 0 0.25" rpy="0 0 0"/>
      <mass value="10.0"/>
      <inertia ixx="0.25" ixy="0.0" ixz="0.0"
               iyy="0.26" iyz="0.0" izz="0.05"/>
    </inertial>
  </link>

  <!-- Head Link -->
  <link name="head">
    <visual>
      <geometry>
        <sphere radius="0.1"/>
      </geometry>
      <material name="skin">
        <color rgba="0.9 0.7 0.6 1.0"/>
      </material>
    </visual>
    <inertial>
      <mass value="2.0"/>
      <inertia ixx="0.008" ixy="0.0" ixz="0.0"
               iyy="0.008" iyz="0.0" izz="0.008"/>
    </inertial>
  </link>

  <!-- Left Upper Arm -->
  <link name="left_upper_arm">
    <visual>
      <origin xyz="0 0 -0.15" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.03" length="0.3"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <inertial>
      <origin xyz="0 0 -0.15" rpy="0 0 0"/>
      <mass value="1.5"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0"
               iyy="0.01" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>

  <!-- Left Forearm -->
  <link name="left_forearm">
    <visual>
      <origin xyz="0 0 -0.125" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.025" length="0.25"/>
      </geometry>
      <material name="skin"/>
    </visual>
    <inertial>
      <origin xyz="0 0 -0.125" rpy="0 0 0"/>
      <mass value="1.0"/>
      <inertia ixx="0.005" ixy="0.0" ixz="0.0"
               iyy="0.005" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>

  <!-- Left Thigh -->
  <link name="left_thigh">
    <visual>
      <origin xyz="0 0 -0.2" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.05" length="0.4"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <inertial>
      <origin xyz="0 0 -0.2" rpy="0 0 0"/>
      <mass value="3.0"/>
      <inertia ixx="0.04" ixy="0.0" ixz="0.0"
               iyy="0.04" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>

  <!-- Left Shin -->
  <link name="left_shin">
    <visual>
      <origin xyz="0 0 -0.175" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.04" length="0.35"/>
      </geometry>
      <material name="gray"/>
    </visual>
    <inertial>
      <origin xyz="0 0 -0.175" rpy="0 0 0"/>
      <mass value="2.0"/>
      <inertia ixx="0.02" ixy="0.0" ixz="0.0"
               iyy="0.02" iyz="0.0" izz="0.005"/>
    </inertial>
  </link>

  <!-- JOINTS -->

  <!-- Torso to Base (Hip) -->
  <joint name="hip_joint" type="fixed">
    <parent link="base_link"/>
    <child link="torso"/>
    <origin xyz="0 0 0.05" rpy="0 0 0"/>
  </joint>

  <!-- Head to Torso (Neck) -->
  <joint name="neck_joint" type="revolute">
    <parent link="torso"/>
    <child link="head"/>
    <origin xyz="0 0 0.55" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>  <!-- Yaw rotation -->
    <limit lower="-1.57" upper="1.57" effort="5.0" velocity="1.0"/>
  </joint>

  <!-- Left Shoulder -->
  <joint name="left_shoulder_pitch" type="revolute">
    <parent link="torso"/>
    <child link="left_upper_arm"/>
    <origin xyz="0 0.15 0.45" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>  <!-- Pitch rotation -->
    <limit lower="-3.14" upper="3.14" effort="20.0" velocity="2.0"/>
  </joint>

  <!-- Left Elbow -->
  <joint name="left_elbow" type="revolute">
    <parent link="left_upper_arm"/>
    <child link="left_forearm"/>
    <origin xyz="0 0 -0.3" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="0.0" upper="2.8" effort="10.0" velocity="2.0"/>
  </joint>

  <!-- Left Hip -->
  <joint name="left_hip_pitch" type="revolute">
    <parent link="base_link"/>
    <child link="left_thigh"/>
    <origin xyz="0 0.08 0" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>  <!-- Pitch rotation -->
    <limit lower="-1.57" upper="1.57" effort="50.0" velocity="1.5"/>
  </joint>

  <!-- Left Knee -->
  <joint name="left_knee" type="revolute">
    <parent link="left_thigh"/>
    <child link="left_shin"/>
    <origin xyz="0 0 -0.4" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="0.0" upper="2.4" effort="40.0" velocity="1.5"/>
  </joint>

  <!-- TODO: Add right arm and right leg (mirror of left side) -->

</robot>
`}
</CodeExample>

**Kinematic Tree Structure**:
```
base_link (pelvis)
├── torso
│   ├── head
│   ├── left_upper_arm → left_forearm
│   └── right_upper_arm → right_forearm (TODO)
├── left_thigh → left_shin
└── right_thigh → right_shin (TODO)
```

## 4.6 Validating and Visualizing URDF

### 4.6.1 URDF Validation

Use `check_urdf` to validate syntax and structure:

<CodeExample language="bash" showLineNumbers={false}>
{`# Install urdf-tutorial package
sudo apt install ros-humble-urdf-tutorial

# Validate URDF file
check_urdf simple_humanoid.urdf

# Expected output:
# robot name is: simple_humanoid
# ---------- Successfully Parsed XML ---------------
# root Link: base_link has 2 child(ren)
#     child(1):  torso
#         child(1):  head
#         child(2):  left_upper_arm
#             child(1):  left_forearm
#     child(2):  left_thigh
#         child(1):  left_shin
`}
</CodeExample>

Common errors:
- **Not a tree**: Loops in kinematic chain (each link can only have one parent)
- **Missing parent/child**: Joint references non-existent link
- **Invalid inertia**: Non-positive-definite inertia tensor

### 4.6.2 Visualizing in RViz2

<CodeExample language="bash" showLineNumbers={false}>
{`# Terminal 1: Launch robot_state_publisher and joint_state_publisher_gui
ros2 launch urdf_tutorial display.launch.py model:=simple_humanoid.urdf

# This launches:
# 1. robot_state_publisher: Publishes TF transforms based on URDF
# 2. joint_state_publisher_gui: GUI sliders to control joint positions
# 3. RViz2: 3D visualization

# In RViz2:
# - Add "RobotModel" display to see URDF
# - Move sliders in joint_state_publisher_gui to animate joints
# - View TF frames to see coordinate transformations
`}
</CodeExample>

<ConceptCallout type="tip" title="RViz2 Debugging Tips">

If your robot doesn't appear in RViz2:
1. **Check Fixed Frame**: Set to "base_link" in Global Options
2. **Add RobotModel display**: Click "Add" → "RobotModel"
3. **Verify TF**: Add "TF" display to see coordinate frames
4. **Check topic**: RobotModel should subscribe to `/robot_description`
5. **Inspect logs**: Look for URDF parsing errors in terminal

Common visual issues:
- **Gray robot**: Material colors not rendering (check RViz2 settings)
- **Twisted geometry**: Incorrect `<origin rpy>` values in visual elements
- **Missing links**: Joint origin places child far from parent

</ConceptCallout>

## 4.7 Xacro: Parameterized URDF

For complex robots, writing raw URDF becomes tedious (copy-pasting left/right arms). **Xacro** (XML Macros) adds:
- **Constants**: Define reusable values
- **Macros**: Template functions for repeated structures
- **Math**: Compute values (e.g., `${'${pi/2}'}`)

<CodeExample language="xml" filename="humanoid.urdf.xacro" difficulty="advanced">
{`<?xml version="1.0"?>
<robot name="humanoid" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- Constants -->
  <xacro:property name="arm_length" value="0.3"/>
  <xacro:property name="arm_radius" value="0.03"/>
  <xacro:property name="arm_mass" value="1.5"/>

  <!-- Macro for arm (reusable for left/right) -->
  <xacro:macro name="arm" params="prefix reflect">
    <link name="\${prefix}_upper_arm">
      <visual>
        <origin xyz="0 0 \${-arm_length/2}" rpy="0 0 0"/>
        <geometry>
          <cylinder radius="\${arm_radius}" length="\${arm_length}"/>
        </geometry>
      </visual>
      <inertial>
        <mass value="\${arm_mass}"/>
        <inertia ixx="0.01" ixy="0.0" ixz="0.0"
                 iyy="0.01" iyz="0.0" izz="0.001"/>
      </inertial>
    </link>

    <joint name="\${prefix}_shoulder" type="revolute">
      <parent link="torso"/>
      <child link="\${prefix}_upper_arm"/>
      <origin xyz="0 \${reflect*0.15} 0.45" rpy="0 0 0"/>
      <axis xyz="0 1 0"/>
      <limit lower="-3.14" upper="3.14" effort="20.0" velocity="2.0"/>
    </joint>
  </xacro:macro>

  <!-- Base and torso links (omitted for brevity) -->

  <!-- Instantiate left and right arms -->
  <xacro:arm prefix="left" reflect="1"/>
  <xacro:arm prefix="right" reflect="-1"/>

</robot>
`}
</CodeExample>

**Convert xacro to URDF:**

<CodeExample language="bash" showLineNumbers={false}>
{`# Process xacro file to generate URDF
ros2 run xacro xacro humanoid.urdf.xacro > humanoid.urdf

# Now use generated URDF file
check_urdf humanoid.urdf
`}
</CodeExample>

## 4.8 Hands-On Exercise: Build a Humanoid Torso

<ExerciseBlock
  title="Humanoid Upper Body URDF"
  difficulty="advanced"
  estimatedTime={60}
  objectives={[
    "Create a URDF model with torso, head, and both arms (5 links, 4 joints minimum)",
    "Use proper humanoid naming conventions (base_link, torso, left_shoulder, etc.)",
    "Validate URDF structure with check_urdf tool",
    "Visualize in RViz2 and demonstrate joint movement using joint_state_publisher_gui"
  ]}
  hints={[
    "Start with base_link as pelvis/hip center",
    "Add torso with fixed joint to base_link",
    "Mirror left arm structure for right arm (change Y-origin sign)",
    "Shoulder pitch joint should rotate around Y-axis",
    "Use symmetric inertia tensors for left/right arms"
  ]}
>

### Problem Statement

Build a URDF model of a humanoid upper body with:
- **Base link** (pelvis)
- **Torso** (fixed to base)
- **Head** (revolute neck joint, ±90° yaw rotation)
- **Left arm**: upper arm + forearm (2 links, 2 revolute joints)
- **Right arm**: upper arm + forearm (2 links, 2 revolute joints)

### Requirements

**Minimum Links**: 6 (base, torso, head, left_upper_arm, left_forearm, right_upper_arm, right_forearm)

**Minimum Joints**: 5
- hip_joint (fixed): base → torso
- neck_joint (revolute, yaw): torso → head (±90°)
- left_shoulder (revolute, pitch): torso → left_upper_arm (±180°)
- left_elbow (revolute, pitch): left_upper_arm → left_forearm (0° to 160°)
- (Mirror for right arm)

**Geometry**:
- Use primitive shapes (box, cylinder, sphere)
- Torso: 0.25m × 0.2m × 0.5m box
- Head: 0.1m radius sphere
- Arms: 0.03m radius cylinders, 0.3m length

**Materials**:
- Assign colors (torso: blue, head: skin tone, arms: gray)

### Testing

```bash
# Validate URDF
check_urdf humanoid_upper_body.urdf

# Visualize in RViz2
ros2 launch urdf_tutorial display.launch.py model:=humanoid_upper_body.urdf

# Verify:
# 1. All 6 links visible
# 2. Joint sliders control arm movement
# 3. TF frames show proper hierarchy
```

### Deliverable

1. URDF file: `humanoid_upper_body.urdf`
2. Screenshot from RViz2 showing robot with arms in different positions
3. Output from `check_urdf` showing successful validation

</ExerciseBlock>

## Key Takeaways

<div className="key-takeaways">

### ✓ Core Concepts Mastered

- **URDF is an XML-based robot description format** defining links (rigid bodies), joints (connections), and properties (visual, collision, inertial)
- **Links contain visual geometry for rendering**, collision geometry for physics, and inertial properties (mass, inertia tensor) for simulation
- **Joints connect links in a tree structure** with six types: revolute (limited rotation), continuous (unlimited rotation), prismatic (linear), fixed, planar, floating
- **Humanoid robots follow naming conventions** (base_link, left_upper_arm, right_thigh) from REP-120 for consistency
- **Kinematic chains define motion hierarchies** with joints enabling degrees of freedom (DOF) for humanoid movement
- **check_urdf validates URDF syntax and structure** catching errors like loops, missing links, and invalid inertia tensors
- **RViz2 + robot_state_publisher visualize URDF models** with joint_state_publisher_gui providing interactive control
- **Xacro extends URDF with macros and parameters** enabling reusable templates for symmetric structures (left/right arms)

</div>

## What's Next?

In **Chapter 5: Launch Files and Package Management**, you'll learn to:
- Create Python launch files for multi-node systems
- Structure ROS 2 packages with proper dependencies
- Pass parameters and configure nodes via launch files
- Build packages with colcon and distribute them

**Prerequisite Check**: Before proceeding, ensure you can:
- ✅ Create a URDF file with links, joints, and visual geometry
- ✅ Explain the difference between visual and collision geometry
- ✅ Calculate inertia tensors for primitive shapes (box, cylinder, sphere)
- ✅ Validate URDF with check_urdf and visualize in RViz2

---

**Next**: Chapter 5: Launch Files and Package Management (coming soon)
